### tv的Gateway服务.

#### V1.8.9
> 1. pgc/view新版详情页隐藏未过审单集

#### V1.8.8
> 1. 牌照回调接口优化：
- 增加error返回（sign错误，json错误，db操作等）
- 查询是否回调的ID是否存在由查DB改为查MC
- 赋值操作收敛到model中
- DB操作改为事务
> 2. 牌照回调接口审核原因改为不必填

#### V1.8.7
> 1. tv vip 订单增加应用渠道信息

#### V1.8.6
> 1. 模块页自动填充的部分加上贴标逻辑

#### V1.8.5
> 1. ugc playurl鉴权接tv-service

#### V1.8.4
> 1. guest_create 接口移除 csrf 验证

#### V1.8.3
> 1. loadep接口：针对旧版本（build id<101500）点击播放非免费内容时，报错

#### V1.8.2
> 1. seasonCMS中新增PayStatus字段，回源逻辑添加该字段
> 2. 修改模块页、追番、索引页、历史记录、

#### V1.8.1
> 1. 支持 tv 会员
> 2. 修改访客扫码为 GET 请求

#### V1.8.0
> 1. pgc详情页v2参数名称修改，原为season_type，新改为type，吐给客户端时兼容season_type也赋值

#### V1.7.9
> 1. PGC season的area字段由int改为string，兼容

#### V1.7.8
> 1. 修复modpage的map并发读写的问题

#### V1.7.7
> 1. pgc的详情页以及风格标签跳转逻辑迁移到service/pgc包中，优化冗余代码
> 2. 新增pgc的新版详情页接口，用于新版本v1.15，继承旧版的审核中隐藏逻辑，去掉旧版的付费隐藏逻辑
> 3. 抽象详情页的season干预、ep干预、审核中ep隐藏等代码为service方法，使得media和mediaV2代码减少冗余部分

#### V1.7.6
> 1. 修复动态分区发版时会503的问题（调整load动态分区和load模块页的顺序）

#### V1.7.5
> 1. 修复野版pgc搜索，err之后没有return的bug

#### V1.7.4
> 1. ugc详情页增加单p的过审状态判断，如果为审核中，则不展示该单p；如果当前稿件没有可展示单p，则报错为稿件审核不过；
> 2. ugc详情页判断是否为空稿件，如果为空稿件，则打入channel中，异步进行稿件的cms下架操作
> 3. 补全cms/dao中的UT

#### V1.7.3
> 1. 索引标签新增排序字段，标签接口吐出标签时，按照排序字段排列

#### V1.7.2
> 1. 野版搜索综合中显示影视电视剧等内容

#### V1.7.1
> 1. 当PGC排行榜接口返回为空时，增加检验逻辑进行报错，不更新内存，直到下一次不空时再更新

#### V1.7.0
> 1. 野版搜索优化

#### V1.6.9
> 1. 详情页添加风格展示

#### V1.6.8
> 1. modpage接口新增字段more_new_page，支持moretype为2（新pgc索引），3（新ugc索引）下发索引的category
> 2. 做新老版本的兼容，当用户为老版本时（1.13及以前），下发morepage字段为其模块所在页面的page_id
> 3. 精选页配置跳转新索引页时，对于老版本根据填充内容映射：
 - 如果填充为pgc索引时，直接映射
 - 如果填充为ugc二级分区索引时，寻找其ugc一级分区索引
 - 如果ugc一级分区索引时，通过ugc分区名称映射到旧ugc索引页，如果映射不到则强制跳转为pgc番剧索引页

#### V1.6.7
> 1. playurl新增ip透传
> 2. playurl改为使用独立的http client配置

#### V1.6.6
> 1. 修改pgc索引页的版权筛选的字段，从copyright改为copyright_info
> 2. 修复ugc索引页的排序问题
> 3. 修正动态标签中时间的问题，将2004-2000倒序成2000-2004，以便ES接受
> 4. 修复首页推荐位卡片type为0的问题：由PGC排行榜数据补全时，赋予pgc类型

#### V1.6.5
> 1. 新增动态分区接口

#### V1.6.4
> 1. 新增索引页接口：pgc，ugc，支持后台干预
> 2. 新老索引页均支持显示pgc第二行
> 3. 补齐dao/app下的UT

#### V1.6.3
> 1. 新增索引筛选标签接口

#### V1.6.2
> 1. 芒果推荐位增加字段

#### V1.6.1
> 1. 修复模块页首页推荐位放入ugc时无法兼容新老版本的问题

#### V1.6.0
> 1. 下线付费内容和审核内容

#### V1.5.9
> 1. tv-interface接grpc: arc, acc
> 2. 完善dao/archive, account, history中的UT

#### V1.5.8
> 1. 因为tv-interface暂时未接grpc，archive-view结构体与tv-job（grpc）不一致，会导致缓存解析失败，吐出aid=0等信息；临时检验aid是否为0，如为0则强制回源gorpc
> 2. 完善dao/archive中的UT

#### V1.5.7
> 1. 收藏接口：客户端字段使用错误，修改服务端字段含义进行修复

#### V1.5.6
> 1. 新增接口供视频云调取，用于写入pgc的提交时间
> 2. 兼容pgc和ugc都会出现的一个cid出现多次的情况，将视频云回调更新操作改为支持更新多行

#### V1.5.5
> 1. 配合芒果媒资同步，pgc的seasonCMS中新增origin_name和alias两个字段，epCMS中新增pay_status两个字段
> 2. 新增芒果媒资同步四个接口：- pgc的season，ep + ugc的稿件和video
> 3. 将season_id, epid, aid, cid 全部统一为int64，方便操作

#### V1.5.4
> 1. 新增芒果推荐位接口
> 2. 在service、model、dao中新增thirdp（第三方媒资、推荐）文件夹用来放置芒果、当贝等相关业务
> 3. 稿件分区数据从service下放到dao层

#### V1.5.3
> 1. 将收藏的添加、删除接口由rpc改为对接http接口

#### V1.5.2
> 1. 首页、分区页、模块页获取干预数据时，检查数据源是否失效，如失效则置为删除
> 2. 补充interface的UT

#### V1.5.1
> 1. 新增tv版收藏展示、添加或删除收藏接口
> 2. 整理代码，将若干短的代码合并到同一文件中，避免过多代码文件

#### V1.5.0
> 1. 透传ugc play url
> 2. 新增大会员清晰度降路逻辑

#### V1.4.9
> 1. 修复加载页面时panic问题，当底层逻辑报错时，不更新page数据，线上继续使用老数据

#### V1.4.8
> 1. ugc、pgc详情页接口新增观看进度
> 2. 历史记录取cms缓存改为批量获取

#### V1.4.7
> 1. 新增历史记录接口
> 2. load数据的逻辑（cache+db）全部下沉到dao层

#### V1.4.6
> 1. Service层进行拆分
> 2. 优化PGC数据的使用方式，不再使用service中的全局变量
> 3. 新老版本干预映射修改，老版本只取pgc干预数据
> 4. 模块页全面支持UGC干预和UGC数据填充，附加版本过滤逻辑，1.12版本支持ugc+pgc混排，1.11以下版本只支持pgc视频
> 5. 首页推荐位改为14条数据，并且支持UGC数据，支持版本过滤

#### V1.4.5
> 1. 修改ugc详情页，如果up主信息下架则不予以展示。如up主信息有干预，则展示干预信息。

#### V1.4.4
> 1. 新增tv版搜索接口，ugc一级分类接口
> 2. tv版sug增加版本过滤逻辑
> 3. pgc详情页接口数据tv端不存在时由500改为报404，pgc相关推荐接口增加重试到3次

#### V1.4.3
> 1. 增加转码信息回调接口，供视频云调用，回传转码信息
> 2. identify迁移verify和auth
> 3. http server迁移engine.Start

#### V1.4.2
> 1. 干预走新老版本对应，老版本干预数据如果有配置，改为走新版本对应模块的干预

#### V1.4.1
> 1. 当贝接口新增最新一集正片字段

#### V1.4.0
> 1. 增加ugc详情页（含原pgc详情页全部逻辑：稿件鉴权，错误语提示，cms干预），相关推荐根据牌照鉴权进行过滤
> 2. DAO层拆分为account,archive（详情页新增）,audit（原牌照回传逻辑),cms（牌照cms干预逻辑），app（app页面逻辑）
> 3. 新增ugc的鉴权接口，优化pgc的鉴权接口逻辑

#### V1.3.13
> 1. 修复modpage追番共用的问题

#### V1.3.12
> 1. 增加默认闪屏逻辑，避免过多-400报错

#### V1.3.11
> 1. 修复map concurrent write的问题

#### V1.3.10
> 1. 优化service加载代码，干预数据生成客户端卡片过程不走DB，改走MC
> 2. 优化媒资信息（封面、标题）干预代码，由单个改成批量
> 3. 合并tv-interface/PgcNewIndex分支代码，异步加载来自于PGC接口的index_show进入service内存中
> 4. 增加ecode的引用，在当贝页面参数错误时进行错误提示

#### V1.3.9
> 1. service中所有阻塞改为goroutine

#### V1.3.8
> 1. 修复loadTypes阻塞的问题

#### V1.3.7
> 1. 新增当贝的全量过审pgc-season & ugc-archive接口

#### V1.3.6
> 1. 新增模块化页面接口

#### V1.3.5
> 1. 修改详情页接口，在episode中增加返回水印信息（回源也增加watermark的部分

#### V1.3.4
> 1. 审核回传支持ugc视频
> 2. 审核回传逻辑从http层移动到service层，方便复用

#### V1.3.3
> 1. 修改zone配置的名称，避免修改原配置

#### V1.3.2
> 1. 推荐位干预逻辑修改，首页、番剧、国创增加最新更新模块
> 2. 详情页+ep和season的鉴权接口报错细化，改为可配置的
> 3. 新增大家都在搜tv版接口

#### V1.3.1
> 1. 修改默认配置

#### V1.3.0
> 1. BM 框架迁移

#### V1.2.4
> 1. 新增搜索结果封装接口

#### V1.2.3
> 1. 修改回传时的前缀，从bilibili改为xds
> 2. 修复主页隐藏index_show影响分区页的问题
> 3. 详情页接口增加MC回源逻辑

#### V1.2.2
> 1. 新增分区索引页面（全部过审season分区列表），支持分页
> 2. 修改索引页面结构

#### V1.2.1
> 1. 新增pgc相关推荐接口

#### V1.2.0
> 1. 新增闪屏接口

#### V1.1.3
> 1. 修复首页追番数据的问题

#### V1.1.2
> 1. 增加tv端升级接口
> 2. 添加详情页接口对accessKey的支持

#### V1.1.1
> 1. 添加详情页接口，聚合鉴权功能，支持内容干预（从MC取，MC中没有时不回源）
> 2. 排行榜接口支持cms层面的干预

#### V1.1.0
> 1. 添加首页（精选页）推荐位、列表排行榜接口
> 2, 添加分区推荐位、列表排行榜接口
> 3. 添加播控鉴权接口

#### V1.0.2
> 新增注入时间和审核原由逻辑


#### V1.0.1
> 审核通过season和ep自动上线


#### V1.0.0
> 视频审核回调接口









